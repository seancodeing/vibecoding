<img src="./app.png" width="60" alt="logo"/>

# PDF 转 CBZ 转换器

基于 Tkinter 的桌面应用，可将单个或批量 PDF 文档转换为漫画阅读器常用的 CBZ（Comic Book ZIP）格式。程序内置多档绘制质量选项，支持实时进度反馈，并可按需保留中间生成的 JPG 文件夹。项目依赖管理使用 `uv`，方便快速安装与运行。

## 功能亮点
- 图形界面：提供输入/输出路径选择、模式说明以及日志输出，使用起来更直观。
- 批量处理：支持文件模式与文件夹模式，可一次性转换多个 PDF。
- 多档画质：内置四种 DPI / JPEG 质量组合，覆盖高质量到黑白瘦身等场景。
- 后台线程：转换过程在独立线程中执行，界面保持响应不假死。
- 完整反馈：全局进度条、单文件进度条与日志区域随时显示当前状态。
- 灵活输出：可自动同步输入目录，也可手动自定义输出路径；可选择是否保留 JPG。

## 快速开始
推荐使用 [uv](https://github.com/astral-sh/uv) 来管理依赖并运行：

```bash
# 安装依赖（会创建 .venv 虚拟环境）
uv sync

# 启动图形界面
uv run python pdf2cbz.py
```

若希望使用系统已有解释器，也可手动创建虚拟环境：

```bash
python -m venv .venv
source .venv/bin/activate  # Windows 使用 .venv\\Scripts\\activate
pip install --upgrade pip
pip install pymupdf pillow
python pdf2cbz.py
```

## 运行步骤
1. 启动程序后，根据需要选择“文件模式”：
   - 关闭：选择一个包含多个 PDF 的目录，程序会批量转换其中所有 PDF。
   - 开启：直接选择一个单独的 PDF。
2. 检查输出目录（默认与输入目录一致，可手动修改）。
3. 选择压缩模式并阅读右侧提示以确认适用场景。
4. 按需勾选“保留 JPG 文件夹”。
5. 点击「开始转换」，等待进度条完成并查看日志输出。

转换完成后，输出目录会生成与原文件同名的 `.cbz` 文件，可直接在漫画/电子书阅读器中打开。

## 转换模式参数
| 模式 | DPI | JPEG 质量 | 灰度 | 典型场景 |
| --- | --- | --- | --- | --- |
| 高质量（大文件） | 200 | 90 | 否 | 杂志、画册、彩色漫画等需要保真的图像 |
| 标准（推荐） | 150 | 80 | 否 | 常见电子书、课件、报告 |
| 小体积（快速） | 100 | 70 | 否 | 以文字为主的文档，优先减小体积 |
| 黑白文档（最小） | 100 | 70 | 是 | 黑白扫描件、OCR 前处理 |

## 项目结构
```
pdf2cbz.py    # 主界面与核心逻辑
app.png       # 应用图标
pyproject.toml
uv.lock
```

## 常见问题
- **uv 未安装**：请先参考 uv 官方文档安装 CLI（macOS/Linux 可通过 Homebrew，Windows 可使用 winget 或自行下载）。
- **PyMuPDF 安装失败**：确保系统具备编译环境，或选择带有 wheels 的 Python 版本。若仍无法安装，可尝试使用 conda。
- **输出目录没有同步输入目录**：只有在未手动修改输出目录时，选择新的输入路径才会自动覆盖输出路径。
- **转换后仍有 JPG 文件夹**：若勾选了“保留 JPG 文件夹”，转换结束后不会自动删除，可手动检查后自行清理。

欢迎根据需要拓展命令行模式、OCR 集成或更多批处理能力。
